<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
          crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
          integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
          integrity="sha512-vKMx8UnXk60zUwyUnUPM3HbQo8QfmNx7+ltw8Pm5zLusl1XIfwcxo8DbWCqMGKaWeNxWA8yrx5v3SaVpMvR3CA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="/web/css/style.css">
<!--    <style>-->
<!--        .rating-container {-->
<!--            font-size: 24px;-->
<!--            cursor: pointer;-->
<!--            display: inline-block;-->
<!--        }-->

<!--        .star {-->
<!--            display: inline-block;-->
<!--        }-->

<!--        .star:hover,-->
<!--        .star.active {-->
<!--            color: gold;-->
<!--        }-->
<!--    </style>-->
</head>
<body>
    <header class="bg-dark">
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="https://motphimw.com/wp-content/uploads/2023/10/Motphimlogo.png" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active text-white" aria-current="page" href="#">Trang chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#">Phim bộ </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#">Phim chiếu rạp</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            The loại
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Phim hoạt hình</a></li>
                            <li><a class="dropdown-item" href="#">Phim bộ </a></li>
                            <li><a class="dropdown-item" href="#">Phim lẻ</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
    <section class="container">
        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="phimbo.html">Phim bộ</a></li>
                <li class="breadcrumb-item active" aria-current="page" th:text="${movie.title}">Chàng quỷ của tôi</li>
            </ol>
        </nav>
    </section>
    <section class="container">
        <div class="card " >
            <div class="row g-0">
                <div class="col-md-2">
                    <img th:src="${movie.poster}" class="img-fluid rounded-start " style="height:100%" alt="...">
                </div>
                <div class="col-md-10">
                    <div class="card-body">
                        <h5 class="card-title" th:text="${movie.title}">Chàng Quỷ Của Tôi</h5>
                        <p class="card-text" th:text="${movie.releaseYear}">My Demon (2023)</p>
                        <div class="p-2 bg-body-tertiary ">
                            <p class="card-text"><small class="text-body-secondary" th:text="${movie.type.value}">Thể lọại: Phim chính kịch, phim hài</small></p>
                            <p class="card-text"><small class="text-body-secondary" th:text="${movie.releaseYear}"> Nam sản xuat: 2023</small></p>

                            <p class="card-text"><small class="text-body-secondary" th:text="${movie.description}"> Noi dung phim: Chàng Quỷ Của Tôi – My Demon kể về Do Do Hee là người kế nhiệm của Future Group. Cô ấy có một tính cách kiêu ngạo và lạnh lùng, người không tin tưởng vào bất cứ ai. Cô ấy hoài nghi về tình yêu. Do Do Hee dính líu đến một con quỷ tên là Jung Koo Won và kết hôn theo hợp đồng với anh ta. Cô phải đối mặt với những thay đổi lớn trong cuộc sống của mình. </small></p>
<!--                            <p class="card-text"><small class="text-body-secondary" > Dao dien :  Tran gia Boi, Lý tai </small></p>-->
<!--                            <p class="card-text"><small class="text-body-secondary"> Dien vien: Trieu Lo Tu, Ha Khai Lang, Giai Nai Na, Dĩnh Nhi, Tào Phi Nhien  </small></p>-->

                        </div>

                    </div>
                </div>
            </div>
        </div>

    </section>
    <section class="container mt-2 mb-4">
        <h4 class="mb-2"> Tập phim </h4>
        <button class="btn btn-primary bg-dark" type="submit">Tap 1</button>
        <button class="btn btn-primary bg-dark" type="submit">Tap 2</button>
        <button class="btn btn-primary bg-dark" type="submit">Tap 3</button>
        <button class="btn btn-primary bg-dark" type="submit">Tap 4</button>
        <button class="btn btn-primary bg-dark" type="submit">Tap 5</button>
        <button class="btn btn-primary bg-dark" type="submit">Tap 6</button>


    </section>
    <section class="py-4">
        <div class="container">
            <h3 class="mb-3">Phim de xuat</h3>
            <div class="row">
                <div th:each="movie : ${relatedMovies}" class="col-2">
                    <div class="movie-item bg-body-tertiary p-3 rouder mb-4">
                        <img class="rounded w-100"
                             th:src="${movie.poster}" alt="">
                        <p class="mt-2" th:text="${movie.title}">Thần ẩn</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="py-4">
        <div class="container">
            <div>
                <div class="d-flex justify-content-between align-items-center">
                    <h3 class="mb-3">Bình luận</h3>
                    <button class="btn btn-primary" id="btn-open-modal-review">
                        Viết đánh giá
                    </button>
                </div>
                <p>Vui lòng <a href="/dang-nhap" class="text-primary text-decoration-underline">đăng
                    nhập</a> để viết bình luận</p>
                <div class="review-list">
                    <div class="rating-item d-flex align-items-center mb-3 pb-3" th:each="review : ${reviews}">
                        <div class="rating-avatar">
                            <img th:src="${review.user.avatar}" th:alt="${review.user.name}">
                        </div>
                        <div class="rating-info ms-3">
                            <div class="d-flex align-items-center">
                                <p class="rating-name mb-0">
                                    <strong th:text="${review.user.name}">Bùi Hiên</strong>
                                </p>
                                <p class="rating-time mb-0 ms-2" th:text="${#dates.format(review.updatedAt, 'dd/MM/yyyy')}">
                                    09/01/2024</p>
                            </div>
                            <div class="rating-star">
                                <p class="mb-0 fw-bold">
                                    <span class="rating-icon"><i class="fa fa-star"></i></span>
                                    <span><th:block th:text="${review.rating}"></th:block>/10 <th:block
                                            th:text="${review.ratingText}"></th:block></span>
                                </p>
                            </div>
                            <p class="rating-content mt-1 mb-0 text-muted" th:text="${review.content}">Phim xem ổn. Điểm
                                nhấn chính là sự hài hước và
                                tiết tấu. Kết phim chưa thực sự hài lòng. 1 số nhân vật hoành tráng ở đầu và giữa phim, thì
                                cuối phim mờ nhạt. Diễn biến phim hoặc chưa dành đủ thời gian, hoặc chưa nhấn mạnh đủ để dẫn
                                đến các kết quả ở cuối phim.</p>

                            <div class="rating-action mt-2">
                                <a href="javascript:void(0)" class="text-primary text-decoration-underline me-2" th:onclick="|openModalUpdate(${review.id})|">Sửa</a>
                                <a href="javascript:void(0)" class="text-danger text-decoration-underline"
                                   th:onclick="|deleteReview(${review.id})|">Xóa</a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="modal fade" id="modal-review" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-title">Viết đánh giá</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <h5 class="text-center" th:text="${movie.title}"></h5>
                        <div class="rating-container my-3 d-flex justify-content-center align-items-center">
                            <span class="rating-item fs-5" data-rating="1"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="2"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="3"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="4"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="5"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="6"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="7"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="8"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="9"><i class="fa fa-star"></i></span>
                            <span class="rating-item fs-5" data-rating="10"><i class="fa fa-star"></i></span>
                        </div>
                        <p id="rating-value" class="text-center fst-italic mt-2"></p>
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control" id="rating-content" rows="5" placeholder="Viết đánh giá"></textarea>
                    </div>

                    <div class="d-flex justify-content-center align-items-center">
                        <button type="button" class="btn btn-primary px-5" id="btn-handle-review">Hoàn tất</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="bg-dark py-4 text-white">
    <div class="container">
        <div class="row">
            <div class="col-4">
                <img src="https://motphimw.com/wp-content/uploads/2023/10/Motphimlogo.png" alt="">
                <p class="mt-2">Motphim - Trang xem phim trực tuyến miễn phí tại Vietnam.
                    Tại đây các bạn có thể tìm kiếm những bộ phim mà mình yêu thích với hơn hàng nghìn bộ phim mới được cập nhật thường xuyên.
                </p>
            </div>
            <div class="col-2">
                <h5 class="text-uppercase mb-3">Danh Muc</h5>
                <p>Phim chieu rap </p>
                <p>Phim chieu rap </p>
                <p>Phim Le </p>
                <p>Phim bo </p>
                <p>Phim TV show </p>

            </div>
            <div class="col-2">
                <h5 class="text-uppercase mb-3">Quoc gia</h5>
                <p>Phim chieu rap </p>
                <p>Phim chieu rap </p>
                <p>Phim Le </p>
                <p>Phim bo </p>
                <p>Phim TV show </p>

            </div>
            <div class="col-2">
                <h5 class="text-uppercase mb-3">Thong tin </h5>
                <p>Phim chieu rap </p>
                <p>Phim chieu rap </p>
                <p>Phim Le </p>
                <p>Phim bo </p>
                <p>Phim TV show </p>

            </div>
        </div>
    </div>

</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
            integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"
            integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="/web/js/common.js"></script>
    <script th:inline="javascript">
        const movie = [[${movie}]];
        let reviews = [[${reviews}]];
        console.log({movie, reviews});
    </script>

    <script src="/web/js/movie-detail-review.js"></script>

</body>
</html>